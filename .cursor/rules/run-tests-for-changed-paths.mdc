---
description: After editing risk/execution/config, run the relevant unit tests
globs: src/risk/**/*.py, src/execution/**/*.py, src/live/protection_ops.py, src/config/config.py, src/config/config.yaml
alwaysApply: false
---

# Run tests for changed paths

After editing any of these files, run the corresponding test modules before considering the change done:

| Path / area | Test command (from repo root) |
|-------------|-------------------------------|
| `src/risk/*` | `pytest tests/unit/test_risk_manager.py tests/unit/test_risk_manager_loss_handler.py -v` |
| `src/execution/*` (executor, engine, position_manager_v2, position_state_machine) | `pytest tests/unit/test_runner_capital_fixes.py tests/unit/test_tp_placement_invariant.py tests/unit/test_production_invariants.py -v` |
| `src/live/protection_ops.py` | `pytest tests/unit/test_runner_capital_fixes.py tests/unit/test_tp_placement_invariant.py -v` |
| `src/config/config.py` or `config.yaml` (risk/auction) | `pytest tests/unit/test_risk_manager.py tests/unit/test_config_load.py -v` |

**Single command** that covers risk + execution + TP invariant (use after multi-file changes):

```bash
pytest tests/unit/test_risk_manager.py tests/unit/test_runner_capital_fixes.py tests/unit/test_tp_placement_invariant.py -v
```

Run these tests after making changes; fix any failures before committing or suggesting deploy.
