name: tradingsystem
region: nyc
envs:
  - key: DATABASE_URL
    scope: RUN_TIME
    type: SECRET
  - key: KRAKEN_API_KEY
    scope: RUN_TIME
    type: SECRET
  - key: KRAKEN_API_SECRET
    scope: RUN_TIME
    type: SECRET
  - key: KRAKEN_FUTURES_API_KEY
    scope: RUN_TIME
    type: SECRET
  - key: KRAKEN_FUTURES_API_SECRET
    scope: RUN_TIME
    type: SECRET
services:
  - name: worker
    github:
      repo: ArielB1980/TradingSystem
      branch: main
    run_command: python migrate_schema.py && WITH_HEALTH=1 python -m src.entrypoints.prod_live
    http_port: 8080
    instance_count: 1
    instance_size_slug: basic-xs
    routes:
      - path: /
      - path: /dashboard
    envs:
      - key: DATABASE_URL
        scope: RUN_TIME
        type: SECRET
      - key: KRAKEN_API_KEY
        scope: RUN_TIME
        type: SECRET
      - key: KRAKEN_API_SECRET
        scope: RUN_TIME
        type: SECRET
      - key: KRAKEN_FUTURES_API_KEY
        scope: RUN_TIME
        type: SECRET
      - key: KRAKEN_FUTURES_API_SECRET
        scope: RUN_TIME
        type: SECRET
      - key: ENVIRONMENT
        value: prod
        scope: RUN_TIME
        type: GENERAL
      - key: USE_STATE_MACHINE_V2
        value: "true"
        scope: RUN_TIME
        type: GENERAL
      - key: CONFIRM_LIVE
        value: "YES"
        scope: RUN_TIME
        type: GENERAL
      - key: DRY_RUN
        value: "0"
        scope: RUN_TIME
        type: GENERAL
      - key: SYSTEM_DRY_RUN
        value: "false"
        scope: RUN_TIME
        type: GENERAL
      - key: TRADING_NEW_ENTRIES_ENABLED
        value: "true"
        scope: RUN_TIME
        type: GENERAL
      - key: TRADING_REVERSALS_ENABLED
        value: "true"
        scope: RUN_TIME
        type: GENERAL
      - key: TRADING_PARTIALS_ENABLED
        value: "true"
        scope: RUN_TIME
        type: GENERAL
      - key: TRADING_TRAILING_ENABLED
        value: "true"
        scope: RUN_TIME
        type: GENERAL
      - key: RUN_REAL_EXCHANGE_TESTS
        value: "0"
        scope: RUN_TIME
        type: GENERAL
      - key: ACCOUNT_FINGERPRINT_SEED
        value: "kraken:futures:primary"
        scope: RUN_TIME
        type: GENERAL
